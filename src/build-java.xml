<?xml version="1.0" encoding="UTF-8"?>

<project name="ASPRO 2" default="about" basedir=".">

  <description>
  	Aspro ant build file
  </description>

  <!-- first load local config file -->
  <property file="build.properties"/>

  <property name="root" location=".."/>

  <property name="libs" location="${root}/lib"/>
  <property name="sources" location="${root}/src"/>


  <taskdef name="xjc" classname="com.sun.tools.xjc.XJCTask">
    <classpath>
      <fileset dir="${libs}/jaxb" includes="*.jar" />
    </classpath>
  </taskdef>



  <!-- targets -->

  <!-- target about : -->
  <target name="about" depends="init" description="show information for public targets">
    <echo>available ant targets : </echo>
    <echo>-------------------------------------------------------------------------------</echo>
    <echo>  - genXsdCode         : generates the java code from xml schema (xsd)</echo>
    <echo>-------------------------------------------------------------------------------</echo>
  </target>


  <!-- target init : timestamp -->
  <target name="init">
    <tstamp>
      <format property="build.date" pattern="dd/MM/yyyy HH:mm:ss" />
    </tstamp>

    <echo>-------------------------------------------------------------------------------</echo>
    <echo>  ${vendor}  ::  ${title} - ${version} </echo>
    <echo>-------------------------------------------------------------------------------</echo>
    <echo> Build File </echo>
    <echo>-------------------------------------------------------------------------------</echo>
    <echo> contacts     : ${build.by}  </echo>
    <echo> build date   : ${build.date} </echo>
    <echo></echo>
    <echo>-------------------------------------------------------------------------------</echo>

  </target>




  <target name="genXsdCode" depends="init">

    <echo>generating java code for AsproOIModel.xsd</echo>
    <mkdir dir="${sources}/fr/jmmc/aspro/model/oi" />
    <xjc destdir="${sources}" schema="${sources}/fr/jmmc/aspro/model/AsproOIModel.xsd"
         removeOldOutput="yes" package="fr.jmmc.aspro.model.oi">
      <produces dir="${sources}/fr/jmmc/aspro/model/oi" includes="*.java" />
    </xjc>

    <echo>generating java code for AsproDataModel.xsd</echo>
    <mkdir dir="${sources}/fr/jmmc/aspro/model/oifits" />
    <xjc destdir="${sources}" schema="${sources}/fr/jmmc/aspro/model/AsproDataModel.xsd"
         removeOldOutput="yes" package="fr.jmmc.aspro.model.oifits">
      <produces dir="${sources}/fr/jmmc/aspro/model/oifits" includes="*.java" />
    </xjc>

  </target>


</project>
